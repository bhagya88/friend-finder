<!DOCTYPE html>
<html>
<head>
	<title>Friend Finder</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

 	<!-- Compiled and minified CSS -->
  	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/css/materialize.min.css">

  	<!-- link custum styles -->
  	<link rel="stylesheet" type="text/css" href="/style.css">
  	<!-- Jquery -->
 	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
 	<style type="text/css">
 		.modal{
 			 width: 30% !important ;
 			 max-height: 100% !important ;
 			 overflow-y: hidden !important ;}
 	</style>
   
</head>
<body>

	<nav class="light-blue lighten-1" role="navigation">
	    <div class="nav-wrapper container">
	          <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons" href="">menu</i></a>
	    </div>
  	</nav>
 

    <div class="container orange-text">
     
		<h2 class="center">Survey Questions</h2>
		<h6 class= "black-text">About You</h6>
		<h5>Name (Required)</h5>

		<!-- form for getting user inputs -->
		<form id="surveyForm">
			<div class="row">
				<div class="input-field col s8">
					<input type="text" name="" id="name" class="input-field col s6" required>
				</div>
			</div>
			<h5>Link to Photo Image (Required)</h5>
			<div class="row">
				<div class="input-field col s8">
					<input type="text" name="" id="photo" class="input-field col s6" required>
				</div>
			</div>
			<!--  Questions -->
			<h6 class= "black-text">Question 1</h6>
			<h5>You generally like to help with chores.</h5>
			<div class="row">
				<div class="input-field col s4">
				 	<select data-placeholder=""  id="q1">
				 		<option value=""></option>
			            <option value="1">1 (Strongly Disagree)</option>
			            <option value="2">2</option>
			            <option value="3">3</option>
			            <option value="4">4</option>
			            <option value="5" selected>5 (Strongly Agree)</option>
			      	</select>
		      	</div>
	      	</div>

			<h6 class= "black-text">Question 2</h6>
			<h5>You love pets.</h5>
			<div class="row">
			 	<div class="input-field col s4">
				 	<select data-placeholder=""  id="q2">
				 		<option value=""></option>
			            <option value="1">1 (Strongly Disagree)</option>
			            <option value="2">2</option>
			            <option value="3">3</option>
			            <option value="4">4</option>
			            <option value="5" selected>5 (Strongly Agree)</option>
			      	</select>
		      	</div>
	      	</div>


			<h6 class="black-text">Question 3</h6>
			<h5>You will rather go hiking than watch movies.</h5>
			<div class="row">
				<div class="input-field col s4">
				 	<select data-placeholder=""  id="q3">
				 		<option value=""></option>
			            <option value="1">1 (Strongly Disagree)</option>
			            <option value="2">2</option>
			            <option value="3">3</option>
			            <option value="4">4</option>
			            <option value="5" selected>5 (Strongly Agree)</option>
			      	</select>
		      	</div>
	      	</div>


			<h6 class="black-text">Question 4</h6>
			<h5>You like to party everyweek.</h5>
			<div class="row">
				<div class="input-field col s4">
				 	<select data-placeholder=""  id="q4">
				 		<option value=""></option>
			            <option value="1">1 (Strongly Disagree)</option>
			            <option value="2">2</option>
			            <option value="3">3</option>
			            <option value="4">4</option>
			            <option value="5" selected>5 (Strongly Agree)</option>
			      	</select>
		      	</div>
	      	</div>


			<h6 class="black-text">Question 5</h6>
			<h5>You like to be around children.</h5>
			<div class="row">
				<div class="input-field col s4">
				 	<select data-placeholder=""  id="q5">
				 		<option value=""></option>
			            <option value="1">1 (Strongly Disagree)</option>
			            <option value="2">2</option>
			            <option value="3">3</option>
			            <option value="4">4</option>
			            <option value="5" selected>5 (Strongly Agree)</option>
			      	</select>
		      	</div>
	      	</div>


			<h6 class= "black-text">Question 6</h6>
			<h5>You consider yourself a good cook.</h5>
		 	<div class="row">
				<div class="input-field col s4">
				 	<select data-placeholder=""  id="q6">
				 		<option value=""></option>
			            <option value="1">1 (Strongly Disagree)</option>
			            <option value="2">2</option>
			            <option value="3">3</option>
			            <option value="4">4</option>
			            <option value="5" selected>5 (Strongly Agree)</option>
			      	</select>
		      	</div>
	      	</div>


			<h6 class="black-text">Question 7</h6>
			<h5>You love to buy new stuff. Don't mind spending from your savings.</h5>
		 	<div class="row">
				<div class="input-field col s4">
				 	<select data-placeholder=""  id="q7">
				 		<option value=""></option>
			            <option value="1">1 (Strongly Disagree)</option>
			            <option value="2">2</option>
			            <option value="3">3</option>
			            <option value="4">4</option>
			            <option value="5" selected>5 (Strongly Agree)</option>
			      	</select>
		      	</div>
	      	</div>

			<h6 class="black-text">Question 8</h6>
			<h5>Travel is very important part of your life. You always like to explore new places.</h5>
			<div class="row">
			<div class="input-field col s4">
			 	<select data-placeholder=""  id="q8">
			 		<option value=""></option>
		            <option value="1">1 (Strongly Disagree)</option>
		            <option value="2">2</option>
		            <option value="3">3</option>
		            <option value="4">4</option>
		            <option value="5" selected>5 (Strongly Agree)</option>
		      	</select>
	      	</div>
	      	</div>

			<h6 class="black-text">Question 9</h6>
			<h5>You think that work is more important than your family.</h5>
			<div class="row">
				<div class="input-field col s4">
				 	<select data-placeholder=""  id="q9">
				 		<option value=""></option>
			            <option value="1">1 (Strongly Disagree)</option>
			            <option value="2">2</option>
			            <option value="3">3</option>
			            <option value="4">4</option>
			            <option value="5" selected>5 (Strongly Agree)</option>
			      	</select>
		      	</div>
	      	</div>

			<h6 class="black-text">Question 10</h6>
			<h5>You love to mow the lawn.</h5>
		 	<div class="row">
				<div class="input-field col s4">
				 	<select data-placeholder=""  id="q10">
				 		<option value=""></option>
			            <option value="1">1 (Strongly Disagree)</option>
			            <option value="2">2</option>
			            <option value="3">3</option>
			            <option value="4">4</option>
			            <option value="5" selected>5 (Strongly Agree)</option>
			      	</select>
		      	</div>
	      	</div>

			<br>
			<br>

			<!-- Submit Button -->
	      	<button id="submit" class="btn waves-effect waves-light" type="submit" name="action">Submit</button>
 		</form>




	    <footer class="footer">
	      <div class="container">
		        <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/bhagya88/friend-finder">GitHub Repo</a></p>
	      </div>
	    </footer>
	</div>


		<!-- Modal -->
		<div id="bestMatch" class ="modal">
			<nav class="light-blue lighten-1" role="navigation">
    			<div class="nav-wrapper container" style="position:relative;">
          			<h4 class="center black-text">Best Match</h4>
          			<a class=" modal-action modal-close waves-effect waves-green btn-flat right-align" style="position:absolute;top:0;right:0;">x</a>
    			</div>

  			</nav>

			<div class="modal-content">
					
				<h2 id="matchName" class="center orange-text" ></h2>
				
				<div class="center-align">
					<div class="input-field center">
						<img  id="matchImg" height ="350px" width ="300px" em alt="bestMatch" >
					</div>
				</div>
			<div>

		   <div class="modal-footer">
      			<a class=" modal-action modal-close waves-effect waves-green btn-flat">Close</a>
    		</div>
		</div>
		



	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script>
		<!-- LeanModal.js for modal -->
	<script type="text/javascript" src="https://cdn.jsdelivr.net/jquery.leanmodal/1.1/jquery.leanmodal.min.js"></script>
		<!-- jquery UI -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>

    <!-- the data entered by user is proccessed in this piece of code-->
	<script type="text/javascript">
		$(document).ready(function() {

        	// use materialize select
		    $('select').material_select();

		    $('#surveyForm').on('submit',function(event){
		    	event.preventDefault();
		    	$('#matchImg').attr('src',"");

		    	// get user inputs and store it in an object
		    	var user = {
			 		name: $('#name').val().trim(),
			  		photo: $('#photo').val().trim(),
			  		scores:[
					     $('#q1').val(),
					     $('#q2').val(),
					     $('#q3').val(),
					     $('#q4').val(),
					     $('#q5').val(),
					     $('#q6').val(),
					     $('#q7').val(),
					     $('#q8').val(),
					     $('#q9').val(),
					     $('#q10').val()
					   ]
				};


		    	console.log('hello');
		    	console.log(user);

		    	//ajax call to post the user info and data we get back is the best match which gets displayed in a modal
		    	$.post('/api/friends',user,function(data){
		    		console.log(data);
		    		$('#matchName').html(data.name);
		    		$('#matchImg').attr('src',data.photo);
		    		$('#bestMatch').openModal({
		                dismissible: true
		            });
		    	});
		    });

		});
	</script>  
</body>
</html>